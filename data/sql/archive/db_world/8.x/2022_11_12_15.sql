-- DB update 2022_11_12_14 -> 2022_11_12_15
-- Not pulling together
UPDATE `creature_formations` SET `GroupAI`=515 WHERE `leaderGUID` IN (138187, 138213) AND `memberGUID` IN (138186, 138211, 138212);
UPDATE `creature_formations` SET `GroupAI`=3 WHERE `leaderGUID` IN (138187, 138213) AND `memberGUID` IN (138187, 138213);
-- Changed from 90
UPDATE `creature_formations` SET `angle`=270 WHERE `memberGUID`=138236 AND `leaderGUID`=138235;

-- Insert missing spawns
DELETE FROM `creature` WHERE `guid` IN (138116, 138117, 138089) AND `id1` IN (17370, 17491);
INSERT INTO `creature` (`guid`, `id1`, `map`, `spawnMask`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `curhealth`, `MovementType`, `wander_distance`,`VerifiedBuild`) VALUES
(138116, 17370, 542, 3, 1, 194.33359, -78.662056, 9.698104, 3.019419670104980468, 86400, 14958, 0, 0, 0),
(138117, 17370, 542, 3, 1, 195.05655, -91.40876, 9.700655, 3.054326057434082031, 86400, 14958, 0, 0, 0),
(138089, 17491, 542, 3, 1, 168.11406, -94.87481, 9.59809, 0, 86400, 7479, 1, 7, 0);

DELETE FROM `creature_formations` WHERE `leaderGUID` IN (138113, 138116) AND `memberGUID` IN (138113, 138114, 138116, 138117);
INSERT INTO `creature_formations` (`memberGUID`, `leaderGUID`, `dist`, `angle`, `groupAI`, `point_1`, `point_2`) VALUES 
(138113, 138113, 0, 0, 3, 0, 0),
(138114, 138113, 0, 0, 3, 0, 0),
(138116, 138116, 0, 0, 3, 0, 0),
(138117, 138116, 0, 0, 3, 0, 0);

-- Update one of the rogues
UPDATE `creature` SET `position_x`=177.42035, `position_y`=-72.2158, `position_z`=9.600988, `MovementType`=1, `wander_distance`=7 WHERE `guid`=138149;
-- Set one warlock and The Maker to wander
UPDATE `creature` SET `MovementType`=1, `wander_distance`=4 WHERE `guid` IN (138123, 138238);

-- Missing Waypoints for Rogues
SET @NPC := 138193;
SET @PATH := @NPC * 10;
UPDATE `creature` SET `MovementType`=2, `wander_distance`=0 WHERE `guid`=@NPC;
DELETE FROM `creature_addon` WHERE `guid`=@NPC;
INSERT INTO `creature_addon` (`guid`,`path_id`,`mount`,`bytes1`,`bytes2`,`emote`,`visibilityDistanceType`,`auras`) VALUES (@NPC,@PATH,0,0,1,0,0, '');
DELETE FROM `waypoint_data` WHERE `id`=@PATH;
INSERT INTO `waypoint_data` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`delay`,`move_type`,`action`,`action_chance`,`wpguid`) VALUES
(@PATH,1,300.26605,182.17151,9.607527,1.949778914451599121,40000,0,0,100,0),
(@PATH,2,306.70996,165.99048,9.616599,0,40000,0,0,100,0);

SET @NPC := 138237;
SET @PATH := @NPC * 10;
UPDATE `creature` SET `wander_distance`=0,`MovementType`=2,`position_x`=496.0039,`position_y`=-28.068384,`position_z`=9.550275 WHERE `guid`=@NPC;
DELETE FROM `creature_addon` WHERE `guid`=@NPC;
INSERT INTO `creature_addon` (`guid`,`path_id`,`mount`,`bytes1`,`bytes2`,`emote`,`visibilityDistanceType`,`auras`) VALUES (@NPC,@PATH,0,0,1,0,0, '');
DELETE FROM `waypoint_data` WHERE `id`=@PATH;
INSERT INTO `waypoint_data` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`delay`,`move_type`,`action`,`action_chance`,`wpguid`) VALUES
(@PATH,1,496.0039,-28.068384,9.550275,0,0,0,0,100,0),
(@PATH,2,488.93185,-34.26514,9.548501,0,0,0,0,100,0),
(@PATH,3,479.19565,-39.19093,9.549496,0,0,0,0,100,0),
(@PATH,4,468.33942,-42.80176,9.5645,0,0,0,0,100,0),
(@PATH,5,461.84634,-52.142986,9.531463,0,0,0,0,100,0),
(@PATH,6,464.30566,-70.733284,9.551741,0,0,0,0,100,0),
(@PATH,7,464.28168,-79.569305,9.581706,0,0,0,0,100,0),
(@PATH,8,465.76486,-88.24423,9.5495825,0,0,0,0,100,0),
(@PATH,9,473.72662,-92.67467,9.554437,0,0,0,0,100,0),
(@PATH,10,482.69244,-92.77731,9.550932,0,0,0,0,100,0),
(@PATH,11,473.72662,-92.67467,9.554437,0,0,0,0,100,0),
(@PATH,12,465.76486,-88.24423,9.5495825,0,0,0,0,100,0),
(@PATH,13,464.28168,-79.569305,9.581706,0,0,0,0,100,0),
(@PATH,14,464.30566,-70.733284,9.551741,0,0,0,0,100,0),
(@PATH,15,461.84634,-52.142986,9.531463,0,0,0,0,100,0),
(@PATH,16,468.33942,-42.80176,9.5645,0,0,0,0,100,0),
(@PATH,17,479.19565,-39.19093,9.549496,0,0,0,0,100,0),
(@PATH,18,488.93185,-34.26514,9.548501,0,0,0,0,100,0);

-- Insert Orc Captive NPCs (not interactable)
UPDATE `creature_template` SET `unit_flags` =  `unit_flags` |33555200 WHERE (`entry` = 17416);

SET @GUID := 138256;
DELETE FROM `creature` WHERE `id1`=17416 AND `guid` BETWEEN @GUID+0 AND @GUID+37;
INSERT INTO `creature` (`guid`, `id1`, `id2`, `id3`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `wander_distance`, `currentwaypoint`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`, `ScriptName`, `VerifiedBuild`) VALUES
(@GUID+0 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 280.142, 70.3569, 9.74308, 6.17847, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+1 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 280.203, 66.8334, 9.74227, 4.29351, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+2 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 281.559, 99.5473, 9.74115, 2.6529, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+3 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 285.496, 101.854, 9.73356, 3.97935, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+4 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 286.712, 66.7152, 9.7295, 6.0912, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+5 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 286.725, 65.3066, 24.5712, 0.191986, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+6 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 286.996, 58.7694, 24.5374, 0.261799, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+7 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 287.042, 97.9489, 9.72977, 4.90438, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+8 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 287.612, 95.6354, 24.37, 0.122173, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+9 , 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 287.898, 70.7117, 9.72841, 4.39823, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+10, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 288.122, 61.9217, 24.6735, 0.0872665, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+11, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 288.545, 90.5341, 24.3603, 0.0174533, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+12, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 288.89, 93.1773, 24.6431, 0.0872665, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+13, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 290.079, 103.655, 38.4771, 6.03884, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+14, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 290.296, 97.9128, 38.4291, 6.26573, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+15, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 290.99, 67.8647, 38.2926, 0.15708, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+16, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 291.076, 100.219, 38.2727, 0, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+17, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 291.242, 65.7576, 38.2571, 0.174533, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+18, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 291.325, 71.8074, 38.2329, 0.0698132, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+19, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 364.188, 99.6752, 38.3535, 2.96706, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+20, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 364.52, 66.2575, 38.4444, 2.96706, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+21, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 364.786, 96.3154, 38.5081, 2.87979, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+22, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 364.915, 102.142, 38.5238, 2.84489, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+23, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 364.938, 69.1484, 38.5124, 3.28122, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+24, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 364.97, 71.8265, 38.5182, 3.21141, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+25, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 365.768, 94.9574, 24.4349, 3.22886, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+26, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 365.769, 91.0963, 24.4518, 3.22886, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+27, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 366.218, 97.7572, 9.72625, 2.02458, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+28, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 366.707, 101.572, 9.72745, 1.43117, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+29, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 366.784, 61.8883, 24.6821, 3.15905, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+30, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 367.154, 93.006, 24.6967, 3.14159, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+31, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 367.343, 64.7455, 24.5678, 2.94961, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+32, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 367.458, 70.4769, 9.72954, 3.15905, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+33, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 367.633, 58.4013, 24.5171, 2.89725, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+34, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 370.119, 66.6892, 9.73466, 3.01942, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+35, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 373.069, 97.8788, 9.74094, 1.13446, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+36, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 373.179, 69.1513, 9.74086, 3.14159, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0),
(@GUID+37, 17416, 0, 0, 542, 3713, 3713, 3, 1, 0, 374.222, 101.531, 9.74316, 4.59022, 86400, 0, 0, 3735, 5468, 0, 0, 0, 0, '', 0);
