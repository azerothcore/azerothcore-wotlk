-- DB update 2022_01_27_01 -> 2022_01_27_02
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_world' AND COLUMN_NAME = '2022_01_27_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_world CHANGE COLUMN 2022_01_27_01 2022_01_27_02 bit;
SELECT sql_rev INTO OK FROM version_db_world WHERE sql_rev = '1642743246127125600'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_world` (`sql_rev`) VALUES ('1642743246127125600');
/* Teldrassil Creatures - East of Dolanar Northern Wildlife */
/* Bad creature_addon entry */
DELETE FROM `creature_addon` WHERE  `guid`=47937;
DELETE FROM `creature` WHERE `guid` IN 
(46431, 46464, 
 47937, 47633, 47933, 47647, 47663, 47857, 47919, 
 49900, 49865, 49862, 49861, 49860, 49880, 49881, 
 47383, 47377, 47380, 47379, 47381, 47382, 47355, 47363, 47356, 47352, 47361, 
 47527, 47517, 47505, 47516, 47518);
INSERT INTO `creature` (`guid`,`id1`,`id2`,`id3`,`map`,`zoneId`,`areaId`,`spawnMask`,`phaseMask`,`equipment_id`,`position_x`,`position_y`,`position_z`,`orientation`,`spawntimesecs`,`wander_distance`,`currentwaypoint`,`curhealth`,`curmana`,`MovementType`,`npcflag`,`unit_flags`,`dynamicflags`,`ScriptName`,`VerifiedBuild`) VALUES
/* Deer */
(46431, 883, 0, 0, 1, 0, 0, 1, 1, 0, 10033.943, 469.61557, 1315.8358, 0.815545499324798583, 300, 27.21194, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10033.943 469.61557 1315.8358
(46464, 883, 0, 0, 1, 0, 0, 1, 1, 0, 9999.969, 352.4555, 1317.6548, 1.382129311561584472, 300, 25.13746, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9999.969 352.4555 1317.6548
/* Rabbit */
(47937, 721, 0, 0, 1, 0, 0, 1, 1, 0, 9942.612, 737.1261, 1319.6045, 4.206971168518066406, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9942.612 737.1261 1319.6045
(47633, 721, 0, 0, 1, 0, 0, 1, 1, 0, 10055.069, 562.2169, 1320.8204, 2.579186439514160156, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10055.069 562.2169 1320.8204
(47933, 721, 0, 0, 1, 0, 0, 1, 1, 0, 10019.531, 433.37805, 1313.9379, 6.099278450012207031, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10019.531 433.37805 1313.9379
(47647, 721, 0, 0, 1, 0, 0, 1, 1, 0, 9977.363, 594.9008, 1314.4362, 0.02495819516479969, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9977.363 594.9008 1314.4362
(47663, 721, 0, 0, 1, 0, 0, 1, 1, 0, 10020.826, 396.51996, 1313.6866, 1.778864860534667968, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10020.826 396.51996 1313.6866 significant relocation
(47857, 721, 0, 0, 1, 0, 0, 1, 1, 0, 10033.81, 345.2744, 1317.964, 2.45847177505493164, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10033.81 345.2744 1317.964
(47919, 721, 0, 0, 1, 0, 0, 1, 1, 0, 10108.704, 396.8199, 1325.3574, 5.760049343109130859, 300, 2.6, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10108.704 396.8199 1325.3574
/* Nightsaber */
(49900, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 9976.458, 882.66113, 1326.5706, 0.097822204232215881, 360, 13, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9976.458 882.66113 1326.5706
(49865, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 9947.63, 517.64734, 1305.9551, 2.990907907485961914, 360, 31.91361, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9947.63 517.64734 1305.9551
(49862, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 10015.073, 450.07727, 1311.6747, 0.976720273494720458, 360, 29.12664, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10015.073 450.07727 1311.6747
(49861, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 10084.23, 449.37827, 1322.3922, 5.777648448944091796, 360, 37.03712, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10084.23 449.37827 1322.3922
(49860, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 10090.146, 387.6736, 1323.4612, 0.75503629446029663, 360, 32.92281, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10090.146 387.6736 1323.4612
(49880, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 9983.918, 416.5625, 1308.207, 5.467410087585449218, 360, 32.92281, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9983.918 416.5625 1308.207
(49881, 2042, 0, 0, 1, 0, 0, 1, 1, 0, 9982.73, 349.3134, 1314.062, 0.779243648052215576, 360, 26.04392, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9982.73 349.3134 1314.062
/* Strigid Owl */
(47383, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 9915.999, 825.8485, 1318.0046, 5.490090370178222656, 360, 12.75, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9915.999 825.8485 1318.0046
(47377, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 9919.407, 880.69434, 1316.917, 5.691661834716796875, 360, 12.12289, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9919.407 880.69434 1316.917
(47380, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10116.195, 708.13086, 1361.1562, 3.106433629989624023, 360, 12, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10116.195 708.13086 1361.1562
(47379, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10084.09, 652.3305, 1339.5466, 0.85127413272857666, 360, 12, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10084.09 652.3305 1339.5466
(47381, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10016.333, 583.65515, 1315.7847, 3.681572914123535156, 360, 13.47039, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10016.333 583.65515 1315.7847
(47382, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10075.386, 583.69727, 1326.3969, 0.576443433761596679, 360, 13.36403, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10075.386 583.69727 1326.3969
(47355, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 9983.97, 549.7285, 1311.5853, 4.455562591552734375, 360, 13.44944, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9983.97 549.7285 1311.5853
(47363, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 9987.057, 483.2936, 1309.4065, 5.430980682373046875, 360, 13.22546, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9987.057 483.2936 1309.4065
(47356, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10046.378, 483.87933, 1319.4929, 2.140175342559814453, 360, 11.6488, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10046.378 483.87933 1319.4929
(47352, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10082.376, 516.05927, 1324.1493, 3.257380962371826171, 360, 12, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10082.376 516.05927 1324.1493
(47361, 1995, 0, 0, 1, 0, 0, 1, 1, 0, 10015.718, 378.8531, 1312.5759, 2.771589517593383789, 360, 14.43277, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 10015.718 378.8531 1312.5759
/* Webwood Lurker */
(47527, 1998, 0, 0, 1, 0, 0, 1, 1, 0, 9932.339, 848.36707, 1318.6937, 4.801371574401855468, 360, 23.31557, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9932.339 848.36707 1318.6937
(47517, 1998, 0, 0, 1, 0, 0, 1, 1, 0, 9985.1455, 680.13605, 1319.8259, 2.278198003768920898, 360, 20, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9985.1455 680.13605 1319.8259
(47505, 1998, 0, 0, 1, 0, 0, 1, 1, 0, 9984.2705, 716.6536, 1321.6016, 2.539757966995239257, 360, 20, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9984.2705 716.6536 1321.6016
(47516, 1998, 0, 0, 1, 0, 0, 1, 1, 0, 9950.124, 718.86523, 1316.5347, 1.26849377155303955, 360, 20, 0, 1, 0, 1, 0, 0, 0, '', 0), -- .go xyz 9950.124 718.86523 1316.5347
(47518, 1998, 0, 0, 1, 0, 0, 1, 1, 0, 9982.858, 751.40497, 1323.9512, 5.331696033477783203, 360, 20, 0, 1, 0, 1, 0, 0, 0, '', 0); -- .go xyz 9982.858 751.40497 1323.9512

--
-- END UPDATING QUERIES
--
UPDATE version_db_world SET date = '2022_01_27_02' WHERE sql_rev = '1642743246127125600';
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
