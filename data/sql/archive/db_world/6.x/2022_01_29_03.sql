-- DB update 2022_01_29_02 -> 2022_01_29_03
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_world' AND COLUMN_NAME = '2022_01_29_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_world CHANGE COLUMN 2022_01_29_02 2022_01_29_03 bit;
SELECT sql_rev INTO OK FROM version_db_world WHERE sql_rev = '1643482599274844462'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_world` (`sql_rev`) VALUES ('1643482599274844462');

-- Pathing for Rak'shiri Entry: 10200 RARE "Missing waypoints"
SET @NPC := 51892;
SET @PATH := @NPC * 10;
UPDATE `creature` SET `wander_distance`=0,`MovementType`=2,`position_x`=7989.789,`position_y`=-4140.1523,`position_z`=690.3426 WHERE `guid`=@NPC;
DELETE FROM `creature_addon` WHERE `guid`=@NPC;
INSERT INTO `creature_addon` (`guid`,`path_id`,`mount`,`bytes1`,`bytes2`,`emote`,`visibilityDistanceType`,`auras`) VALUES (@NPC,@PATH,0,0,1,0,0, '');
DELETE FROM `waypoint_data` WHERE `id`=@PATH;
INSERT INTO `waypoint_data` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`delay`,`move_type`,`action`,`action_chance`,`wpguid`) VALUES
(@PATH,1,7989.789,-4140.1523,690.3426,0,0,0,0,100,0),
(@PATH,2,7977.076,-4159.334,688.2176,0,0,0,0,100,0),
(@PATH,3,7965.8896,-4186.3447,688.7741,0,0,0,0,100,0),
(@PATH,4,7941.224,-4209.0034,694.5759,0,0,0,0,100,0),
(@PATH,5,7913.54,-4214.975,689.97736,0,0,0,0,100,0),
(@PATH,6,7894.8247,-4232.837,689.154,0,0,0,0,100,0),
(@PATH,7,7865.3813,-4243.4863,682.43335,0,0,0,0,100,0),
(@PATH,8,7829.1895,-4234.7446,679.82996,0,0,0,0,100,0),
(@PATH,9,7809.7524,-4221.3433,676.22784,0,0,0,0,100,0),
(@PATH,10,7801.4097,-4189.0337,680.00665,0,0,0,0,100,0),
(@PATH,11,7805.8384,-4151.6406,682.7224,0,0,0,0,100,0),
(@PATH,12,7796.2544,-4122.0093,684.9932,0,0,0,0,100,0),
(@PATH,13,7786.441,-4094.673,684.841,0,0,0,0,100,0),
(@PATH,14,7792.883,-4071.8008,685.97284,0,0,0,0,100,0),
(@PATH,15,7806.6997,-4062.4458,687.47864,0,0,0,0,100,0),
(@PATH,16,7830.987,-4048.4597,690.4181,0,0,0,0,100,0),
(@PATH,17,7842.3315,-4034.5947,690.7368,0,0,0,0,100,0),
(@PATH,18,7830.987,-4048.4597,690.4181,0,0,0,0,100,0),
(@PATH,19,7806.6997,-4062.4458,687.47864,0,0,0,0,100,0),
(@PATH,20,7792.883,-4071.8008,685.97284,0,0,0,0,100,0),
(@PATH,21,7786.441,-4094.673,684.841,0,0,0,0,100,0),
(@PATH,22,7796.24,-4121.9746,684.9588,0,0,0,0,100,0),
(@PATH,23,7805.8384,-4151.6406,682.7224,0,0,0,0,100,0),
(@PATH,24,7801.4097,-4189.0337,680.00665,0,0,0,0,100,0),
(@PATH,25,7809.7524,-4221.3433,676.22784,0,0,0,0,100,0),
(@PATH,26,7829.1895,-4234.7446,679.82996,0,0,0,0,100,0),
(@PATH,27,7865.3813,-4243.4863,682.43335,0,0,0,0,100,0),
(@PATH,28,7894.8247,-4232.837,689.154,0,0,0,0,100,0),
(@PATH,29,7913.54,-4214.975,689.97736,0,0,0,0,100,0),
(@PATH,30,7941.224,-4209.0034,694.5759,0,0,0,0,100,0),
(@PATH,31,7965.8896,-4186.3447,688.7741,0,0,0,0,100,0),
(@PATH,32,7977.0757,-4159.335,688.2735,0,0,0,0,100,0);

-- Pathing for Azurous Entry: 10202 RARE "Only has 9 points atm"
SET @NPC := 51890;
SET @PATH := @NPC * 10;
UPDATE `creature` SET `wander_distance`=0,`MovementType`=2,`position_x`=5977.622,`position_y`=-5059.1562,`position_z`=798.2071 WHERE `guid`=@NPC;
DELETE FROM `creature_addon` WHERE `guid`=@NPC;
INSERT INTO `creature_addon` (`guid`,`path_id`,`mount`,`bytes1`,`bytes2`,`emote`,`visibilityDistanceType`,`auras`) VALUES (@NPC,@PATH,0,0,1,0,0, '');
DELETE FROM `waypoint_data` WHERE `id`=@PATH;
INSERT INTO `waypoint_data` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`delay`,`move_type`,`action`,`action_chance`,`wpguid`) VALUES
(@PATH,1,5977.622,-5059.1562,798.2071,0,0,0,0,100,0),
(@PATH,2,6019.4966,-5040.973,784.711,0,0,0,0,100,0),
(@PATH,3,6064.5723,-5021.378,783.769,0,0,0,0,100,0),
(@PATH,4,6110.539,-5029.3594,791.50226,0,0,0,0,100,0),
(@PATH,5,6143.759,-5048.502,788.65424,0,0,0,0,100,0),
(@PATH,6,6182.4365,-5064.908,783.3755,0,0,0,0,100,0),
(@PATH,7,6224.1846,-5048.121,777.5784,0,0,0,0,100,0),
(@PATH,8,6255.662,-5044.65,774.0142,0,0,0,0,100,0),
(@PATH,9,6295.048,-5045.93,768.91895,0,0,0,0,100,0),
(@PATH,10,6333.2446,-5046.217,760.89954,0,0,0,0,100,0),
(@PATH,11,6378.5874,-5045.983,751.7699,0,0,0,0,100,0),
(@PATH,12,6408.9062,-5042.45,747.1038,0,0,0,0,100,0),
(@PATH,13,6438.631,-5018.7754,739.46704,0,0,0,0,100,0),
(@PATH,14,6466.9214,-4989.887,733.5924,0,0,0,0,100,0),
(@PATH,15,6484.6187,-4964.1616,728.38806,0,0,0,0,100,0),
(@PATH,16,6500.9053,-4934.625,725.9751,0,0,0,0,100,0),
(@PATH,17,6510.156,-4904.851,721.88885,0,0,0,0,100,0),
(@PATH,18,6535.346,-4877.962,709.66003,0,0,0,0,100,0),
(@PATH,19,6559.993,-4860.916,701.8981,0,0,0,0,100,0),
(@PATH,20,6560.6924,-4846.8823,702.22156,0,0,0,0,100,0),
(@PATH,21,6551.3184,-4819.4688,703.50165,0,0,0,0,100,0),
(@PATH,22,6550.175,-4785.0747,698.35455,0,0,0,0,100,0),
(@PATH,23,6574.4854,-4751.122,696.6307,0,0,0,0,100,0),
(@PATH,24,6583.19,-4721.8228,699.9848,0,0,0,0,100,0),
(@PATH,25,6580.944,-4680.032,700.6795,0,0,0,0,100,0),
(@PATH,26,6568.839,-4646.3813,694.20593,0,0,0,0,100,0),
(@PATH,27,6559.5376,-4618.036,699.1639,0,0,0,0,100,0),
(@PATH,28,6552.8423,-4585.8774,703.9992,0,0,0,0,100,0),
(@PATH,29,6525.8843,-4563.0024,713.34814,0,0,0,0,100,0),
(@PATH,30,6495.5845,-4547.865,716.13666,0,0,0,0,100,0),
(@PATH,31,6458.242,-4526.247,723.9024,0,0,0,0,100,0),
(@PATH,32,6450.272,-4486.0547,733.4114,0,0,0,0,100,0),
(@PATH,33,6460.925,-4454.0137,729.60724,0,0,0,0,100,0),
(@PATH,34,6449.634,-4421.929,723.395,0,0,0,0,100,0),
(@PATH,35,6424.509,-4403.555,722.53986,0,0,0,0,100,0),
(@PATH,36,6389.6064,-4387.151,731.3281,0,0,0,0,100,0),
(@PATH,37,6364.2065,-4363.7295,738.5326,0,0,0,0,100,0),
(@PATH,38,6362.864,-4328.876,726.9081,0,0,0,0,100,0),
(@PATH,39,6356.4766,-4298.46,720.3398,0,0,0,0,100,0),
(@PATH,40,6338.967,-4285.1387,725.533,0,0,0,0,100,0),
(@PATH,41,6317.179,-4280.9697,733.07135,0,0,0,0,100,0),
(@PATH,42,6280.007,-4269.131,735.89386,0,0,0,0,100,0),
(@PATH,43,6258.9546,-4251.505,735.4764,0,0,0,0,100,0),
(@PATH,44,6260.608,-4236.567,734.0861,0,0,0,0,100,0),
(@PATH,45,6286.389,-4221.4956,724.37964,0,0,0,0,100,0),
(@PATH,46,6327.7095,-4218.922,721.2304,0,0,0,0,100,0),
(@PATH,47,6365.3574,-4205.9644,711.0905,0,0,0,0,100,0),
(@PATH,48,6380.78,-4186.5728,705.8233,0,0,0,0,100,0),
(@PATH,49,6365.3574,-4205.9644,711.0905,0,0,0,0,100,0),
(@PATH,50,6327.7095,-4218.922,721.2304,0,0,0,0,100,0),
(@PATH,51,6286.389,-4221.4956,724.37964,0,0,0,0,100,0),
(@PATH,52,6260.608,-4236.567,734.0861,0,0,0,0,100,0),
(@PATH,53,6258.9546,-4251.505,735.4764,0,0,0,0,100,0),
(@PATH,54,6280.007,-4269.131,735.89386,0,0,0,0,100,0),
(@PATH,55,6317.1787,-4280.9375,733.0124,0,0,0,0,100,0),
(@PATH,56,6338.792,-4285.0625,725.533,0,0,0,0,100,0),
(@PATH,57,6356.4766,-4298.46,720.3398,0,0,0,0,100,0),
(@PATH,58,6362.864,-4328.876,726.9081,0,0,0,0,100,0),
(@PATH,59,6364.2065,-4363.7295,738.5326,0,0,0,0,100,0),
(@PATH,60,6389.6064,-4387.151,731.3281,0,0,0,0,100,0),
(@PATH,61,6424.509,-4403.555,722.53986,0,0,0,0,100,0),
(@PATH,62,6449.634,-4421.929,723.395,0,0,0,0,100,0),
(@PATH,63,6460.925,-4454.0137,729.60724,0,0,0,0,100,0),
(@PATH,64,6450.272,-4486.0547,733.4114,0,0,0,0,100,0),
(@PATH,65,6458.242,-4526.247,723.9024,0,0,0,0,100,0),
(@PATH,66,6495.4473,-4547.832,716.11285,0,0,0,0,100,0),
(@PATH,67,6525.8843,-4563.0024,713.34814,0,0,0,0,100,0),
(@PATH,68,6552.8423,-4585.8774,703.9992,0,0,0,0,100,0),
(@PATH,69,6559.5376,-4618.036,699.1639,0,0,0,0,100,0),
(@PATH,70,6568.839,-4646.3813,694.20593,0,0,0,0,100,0),
(@PATH,71,6580.944,-4680.032,700.6795,0,0,0,0,100,0),
(@PATH,72,6583.19,-4721.8228,699.9848,0,0,0,0,100,0),
(@PATH,73,6574.4854,-4751.122,696.6307,0,0,0,0,100,0),
(@PATH,74,6550.175,-4785.0747,698.35455,0,0,0,0,100,0),
(@PATH,75,6551.2627,-4819.317,703.477,0,0,0,0,100,0),
(@PATH,76,6560.6924,-4846.8823,702.22156,0,0,0,0,100,0),
(@PATH,77,6559.993,-4860.916,701.8981,0,0,0,0,100,0),
(@PATH,78,6535.346,-4877.962,709.66003,0,0,0,0,100,0),
(@PATH,79,6510.156,-4904.851,721.88885,0,0,0,0,100,0),
(@PATH,80,6500.9053,-4934.625,725.9751,0,0,0,0,100,0),
(@PATH,81,6484.6187,-4964.1616,728.38806,0,0,0,0,100,0),
(@PATH,82,6466.9214,-4989.887,733.5924,0,0,0,0,100,0),
(@PATH,83,6438.6333,-5018.7754,739.51074,0,0,0,0,100,0),
(@PATH,84,6408.9062,-5042.45,747.1038,0,0,0,0,100,0),
(@PATH,85,6378.5874,-5045.983,751.7699,0,0,0,0,100,0),
(@PATH,86,6333.2446,-5046.217,760.89954,0,0,0,0,100,0),
(@PATH,87,6295.048,-5045.93,768.91895,0,0,0,0,100,0),
(@PATH,88,6255.662,-5044.65,774.0142,0,0,0,0,100,0),
(@PATH,89,6224.2485,-5048.0503,777.68024,0,0,0,0,100,0),
(@PATH,90,6182.5884,-5064.9365,783.42944,0,0,0,0,100,0),
(@PATH,91,6143.91,-5048.5293,788.59283,0,0,0,0,100,0),
(@PATH,92,6110.539,-5029.3594,791.50226,0,0,0,0,100,0),
(@PATH,93,6064.5723,-5021.378,783.769,0,0,0,0,100,0),
(@PATH,94,6019.4966,-5040.973,784.711,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
UPDATE version_db_world SET date = '2022_01_29_03' WHERE sql_rev = '1643482599274844462';
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
