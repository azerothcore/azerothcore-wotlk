-- DB update 2016_09_24_00 -> 2016_09_24_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
START TRANSACTION;
ALTER TABLE version_db_world CHANGE COLUMN 2016_09_24_00 2016_09_24_01 bit;
SELECT sql_rev INTO OK FROM version_db_world WHERE sql_rev = '1473111010225487800'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--
INSERT INTO version_db_world(`sql_rev`) VALUES ('1473111010225487800');


-- Ambassitor Kelmer Walk fix 

DELETE FROM `creature_formations` WHERE `leaderGUID`=64973;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`) VALUES
(64973, 64973, 0, 0, 2),
(64973, 64969, 3, 90, 2),
(64973, 64972, 3, 190, 2),
(64973, 64970, 3, 150, 2),
(64973, 64971, 3, 230, 2);

-- Pathing for Ambassador Kelemar Entry: 18191 'TDB FORMAT' 
SET @NPC := 64973;
SET @PATH := @NPC * 10;
UPDATE `creature` SET `spawndist`=0,`MovementType`=2,`position_x`=9820.037,`position_y`=-7272.192,`position_z`=26.49395 WHERE `guid`=@NPC;
DELETE FROM `creature_addon` WHERE `guid`=@NPC;
INSERT INTO `creature_addon` (`guid`,`path_id`,`mount`,`bytes1`,`bytes2`,`emote`,`auras`) VALUES (@NPC,@PATH,0,0,1,0, '');
DELETE FROM `waypoint_data` WHERE `id`=@PATH;
INSERT INTO `waypoint_data` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`delay`,`move_type`,`action`,`action_chance`,`wpguid`) VALUES
(@PATH,1,9796.135,-7283.987,27.08482,0,0,0,0,100,0), -- 19:26:00
(@PATH,2,9780.896,-7294.989,25.69673,0,0,0,0,100,0), -- 19:26:06
(@PATH,3,9761.531,-7308.111,24.53886,0,0,0,0,100,0), -- 19:26:17
(@PATH,4,9739.729,-7318.02,24.66139,0,0,0,0,100,0), -- 19:26:24
(@PATH,5,9718.599,-7323.634,17.83319,0,0,0,0,100,0), -- 19:26:33
(@PATH,6,9705.037,-7327.564,12.23571,0,0,0,0,100,0), -- 19:26:43
(@PATH,7,9692.664,-7328.254,12.46708,0,0,0,0,100,0), -- 19:26:50
(@PATH,8,9688.664,-7326.754,13.46708,0,0,0,0,100,0), -- 19:26:50
(@PATH,9,9687.164,-7326.254,13.71708,0,0,0,0,100,0), -- 19:26:50
(@PATH,10,9684.914,-7325.504,13.71708,0,0,0,0,100,0), -- 19:26:50
(@PATH,11,9680.164,-7323.754,13.96708,0,0,0,0,100,0), -- 19:26:50
(@PATH,12,9678.275,-7317.159,14.09098,0,0,0,0,100,0), -- 19:27:18
(@PATH,13,9678.275,-7315.409,14.09098,0,0,0,0,100,0), -- 19:27:18
(@PATH,14,9693.328,-7309.638,14.26884,0,0,0,0,100,0), -- 19:27:24
(@PATH,15,9694.828,-7309.638,14.51884,0,0,0,0,100,0), -- 19:27:24
(@PATH,16,9697.677,-7306.808,14.97078,0,0,0,0,100,0), -- 19:27:31
(@PATH,17,9698.177,-7303.808,15.47078,0,0,0,0,100,0), -- 19:27:31
(@PATH,18,9694.492,-7299.811,14.81144,0,0,0,0,100,0), -- 19:27:35
(@PATH,19,9693.242,-7299.561,14.56144,0,0,0,0,100,0), -- 19:27:35
(@PATH,20,9681.492,-7297.311,14.31144,0,0,0,0,100,0), -- 19:27:35
(@PATH,21,9680.242,-7297.061,14.31144,0,0,0,0,100,0), -- 19:27:35
(@PATH,22,9676.988,-7291.817,14.21627,0,0,0,0,100,0), -- 19:27:43
(@PATH,23,9676.488,-7290.067,13.96627,0,0,0,0,100,0), -- 19:27:43
(@PATH,24,9674.988,-7285.067,14.21627,0,0,0,0,100,0), -- 19:27:43
(@PATH,25,9664.734,-7275.52,14.00172,0,0,0,0,100,0), -- 19:27:51
(@PATH,26,9663.512,-7275.039,14.20501,0,0,0,0,100,0), -- 19:27:54
(@PATH,27,9640.073,-7275.812,14.19427,0,0,0,0,100,0), -- 19:28:00
(@PATH,28,9600.183,-7275.951,14.198,0,0,0,0,100,0), -- 19:28:11
(@PATH,29,9591.281,-7275.895,14.20201,0,0,0,0,100,0), -- 19:28:24
(@PATH,30,9527.367,-7276.398,14.20272,0,0,0,0,100,0), -- 19:28:42
(@PATH,31,9514.253,-7280.672,14.23572,0,0,0,0,100,0), -- 19:28:51
(@PATH,32,9513.003,-7281.172,14.23572,0,0,0,0,100,0), -- 19:28:51
(@PATH,33,9505.664,-7290.029,14.31716,0,0,0,0,100,0), -- 19:28:59
(@PATH,34,9505.664,-7307.279,14.31716,0,0,0,0,100,0), -- 19:28:59
(@PATH,35,9515.084,-7323.17,14.36923,0,0,0,0,100,0), -- 19:29:11
(@PATH,36,9520.657,-7327.142,14.34109,0,0,0,0,100,0), -- 19:29:18
(@PATH,37,9530.853,-7327.042,14.0993,0,0,0,0,100,0), -- 19:29:25
(@PATH,38,9548.444,-7326.636,14.06214,0,0,0,0,100,0), -- 19:29:58
(@PATH,39,9580.658,-7327.75,14.35676,0,0,0,0,100,0), -- 19:30:04
(@PATH,40,9594.123,-7336.496,14.41358,0,0,0,0,100,0), -- 19:30:20
(@PATH,41,9596.051,-7359.264,13.80623,0,0,0,0,100,0), -- 19:31:00
(@PATH,42,9596.301,-7361.264,13.80623,0,0,0,0,100,0), -- 19:31:00
(@PATH,43,9579.046,-7368.445,13.69998,0,0,0,0,100,0), -- 19:31:11
(@PATH,44,9577.046,-7368.695,13.94998,0,0,0,0,100,0), -- 19:31:11
(@PATH,45,9574.296,-7368.945,14.19998,0,0,0,0,100,0), -- 19:31:11
(@PATH,46,9573.438,-7371.7,14.59834,0,0,0,0,100,0), -- 19:31:21
(@PATH,47,9573.438,-7372.7,14.84834,0,0,0,0,100,0), -- 19:31:21
(@PATH,48,9573.438,-7377.45,14.84834,0,0,0,0,100,0), -- 19:31:21
(@PATH,49,9573.438,-7381.45,14.84834,0,0,0,0,100,0), -- 19:31:21
(@PATH,50,9578.811,-7384.082,14.05795,0,0,0,0,100,0), -- 19:31:27
(@PATH,51,9581.811,-7384.332,13.80795,0,0,0,0,100,0), -- 19:31:27
(@PATH,52,9590.561,-7385.082,13.80795,0,0,0,0,100,0), -- 19:31:27
(@PATH,53,9591.811,-7385.332,13.80795,0,0,0,0,100,0), -- 19:31:27
(@PATH,54,9594.387,-7393.903,13.32688,0,0,0,0,100,0), -- 19:31:35
(@PATH,55,9605.18,-7424.402,13.54854,0,0,0,0,100,0), -- 19:31:46
(@PATH,56,9611.559,-7427.8,13.55342,0,0,0,0,100,0), -- 19:31:55
(@PATH,57,9650.357,-7430.099,13.54782,0,0,0,0,100,0), -- 19:32:02
(@PATH,58,9667.592,-7436.145,13.54347,0,0,0,0,100,0), -- 19:32:13
(@PATH,59,9669.131,-7436.995,13.54329,0,0,0,0,100,0), -- 19:32:19
(@PATH,60,9692.813,-7437.087,13.54329,0,0,0,0,100,0), -- 19:32:27
(@PATH,61,9700.063,-7434.087,13.54329,0,0,0,0,100,0), -- 19:32:27
(@PATH,62,9720.646,-7424.146,13.5211,0,0,0,0,100,0), -- 19:32:35
(@PATH,63,9746.543,-7421.814,13.48517,0,0,0,0,100,0), -- 19:32:44
(@PATH,64,9740.969,-7422.06,13.22301,0,0,0,0,100,0), -- 19:32:51
(@PATH,65,9760.844,-7421.124,13.52046,0,0,0,0,100,0), -- 19:33:13
(@PATH,66,9766.758,-7413.826,13.86535,0,0,0,0,100,0), -- 19:33:19
(@PATH,67,9767.258,-7402.326,13.86535,0,0,0,0,100,0), -- 19:33:19
(@PATH,68,9767.258,-7400.326,13.86535,0,0,0,0,100,0), -- 19:33:19
(@PATH,69,9767.258,-7397.576,14.11535,0,0,0,0,100,0), -- 19:33:19
(@PATH,70,9767.447,-7397.039,14.50608,0,0,0,0,100,0), -- 19:33:29
(@PATH,71,9770.447,-7397.039,14.50608,0,0,0,0,100,0), -- 19:33:29
(@PATH,72,9775.947,-7396.789,15.00608,0,0,0,0,100,0), -- 19:33:29
(@PATH,73,9790.197,-7396.289,14.75608,0,0,0,0,100,0), -- 19:33:29
(@PATH,74,9791.447,-7396.289,15.00608,0,0,0,0,100,0), -- 19:33:29
(@PATH,75,9793.188,-7398,14.60959,0,0,0,0,100,0), -- 19:33:40
(@PATH,76,9793.188,-7400.75,14.10959,0,0,0,0,100,0), -- 19:33:40
(@PATH,77,9793.188,-7402.5,14.10959,0,0,0,0,100,0), -- 19:33:40
(@PATH,78,9793.438,-7405.5,13.85959,0,0,0,0,100,0), -- 19:33:40
(@PATH,79,9793.438,-7415,13.85959,0,0,0,0,100,0), -- 19:33:40
(@PATH,80,9801.363,-7416.336,13.89329,0,0,0,0,100,0), -- 19:33:47
(@PATH,81,9803.363,-7416.336,13.39329,0,0,0,0,100,0), -- 19:33:47
(@PATH,82,9815.096,-7417.077,13.5569,0,0,0,0,100,0), -- 19:33:55
(@PATH,83,9842.76,-7416.906,13.55959,0,0,0,0,100,0), -- 19:34:05
(@PATH,84,9876.417,-7415.617,13.53772,0,0,0,0,100,0), -- 19:34:14
(@PATH,85,9872.041,-7415.873,13.27497,0,0,0,0,100,0), -- 19:34:20
(@PATH,86,9879.891,-7412.866,13.51642,0,0,0,0,100,0), -- 19:35:01
(@PATH,87,9882.891,-7409.116,13.51642,0,0,0,0,100,0), -- 19:35:01
(@PATH,88,9884.779,-7404.788,13.42007,0,0,0,0,100,0), -- 19:35:06
(@PATH,89,9884.512,-7369.616,20.88766,0,0,0,0,100,0), -- 19:35:13
(@PATH,90,9888.86,-7355.768,20.93519,0,0,0,0,100,0), -- 19:35:22
(@PATH,91,9889.949,-7346.212,22.30157,0,0,0,0,100,0), -- 19:35:28
(@PATH,92,9889.699,-7344.462,22.55157,0,0,0,0,100,0), -- 19:35:28
(@PATH,93,9885.719,-7331.884,24.01373,0,0,0,0,100,0), -- 19:35:35
(@PATH,94,9875.469,-7325.634,25.51373,0,0,0,0,100,0), -- 19:35:35
(@PATH,95,9873.414,-7324.011,26.02122,0,0,0,0,100,0), -- 19:35:42
(@PATH,96,9870.914,-7322.011,26.52122,0,0,0,0,100,0), -- 19:35:42
(@PATH,97,9862.414,-7315.011,26.52122,0,0,0,0,100,0), -- 19:35:42
(@PATH,98,9858.664,-7312.011,26.52122,0,0,0,0,100,0), -- 19:35:42
(@PATH,99,9852.256,-7303.121,26.45031,0,0,0,0,100,0), -- 19:36:15
(@PATH,100,9850.756,-7299.871,26.45031,0,0,0,0,100,0), -- 19:36:15
(@PATH,101,9848.256,-7295.121,26.45031,0,0,0,0,100,0), -- 19:36:15
(@PATH,102,9845.628,-7286.911,26.397,0,0,0,0,100,0), -- 19:36:22
(@PATH,103,9843.291,-7277.301,26.41252,0,0,0,0,100,0), -- 19:36:28
(@PATH,104,9819.617,-7272.363,26.49641,0,0,0,0,100,0); -- 19:36:36

UPDATE `creature` SET `spawndist`=0,`position_x`=9817.200195,`position_y`=-7268.220215,`position_z`=26.223801 WHERE `guid`=64969;
UPDATE `creature` SET `spawndist`=0,`position_x`=9824.250000,`position_y`=-7272.975586,`position_z`=26.244701 WHERE `guid`=64970;
UPDATE `creature` SET `spawndist`=0,`position_x`=9824.455078,`position_y`=-7270.105957,`position_z`=26.228758 WHERE `guid`=64972;
UPDATE `creature` SET `spawndist`=0,`position_x`=9822.427734,`position_y`=-7267.509277,`position_z`=26.203625 WHERE `guid`=64971;
--
-- END UPDATING QUERIES
--
COMMIT;
END;
//
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
