-- DB update 2021_05_05_02 -> 2021_05_06_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_world' AND COLUMN_NAME = '2021_05_05_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_world CHANGE COLUMN 2021_05_05_02 2021_05_06_00 bit;
SELECT sql_rev INTO OK FROM version_db_world WHERE sql_rev = '1619501292588526500'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_world` (`sql_rev`) VALUES ('1619501292588526500');

INSERT IGNORE INTO `spell_dbc` (`ID`, `Category`, `DispelType`, `Mechanic`, `Attributes`, `AttributesEx`, `AttributesEx2`, `AttributesEx3`, `AttributesEx4`, `AttributesEx5`, `AttributesEx6`, `AttributesEx7`, `ShapeshiftMask`, `ShapeshiftExclude`, `Targets`, `TargetCreatureType`, `RequiresSpellFocus`, `FacingCasterFlags`, `CasterAuraState`, `TargetAuraState`, `ExcludeCasterAuraState`, `ExcludeTargetAuraState`, `CasterAuraSpell`, `TargetAuraSpell`, `ExcludeCasterAuraSpell`, `ExcludeTargetAuraSpell`, `CastingTimeIndex`, `RecoveryTime`, `CategoryRecoveryTime`, `InterruptFlags`, `AuraInterruptFlags`, `ChannelInterruptFlags`, `ProcTypeMask`, `ProcChance`, `ProcCharges`, `MaxLevel`, `BaseLevel`, `SpellLevel`, `DurationIndex`, `PowerType`, `ManaCost`, `ManaCostPerLevel`, `ManaPerSecond`, `ManaPerSecondPerLevel`, `RangeIndex`, `Speed`, `ModalNextSpell`, `CumulativeAura`, `Totem_1`, `Totem_2`, `Reagent_1`, `Reagent_2`, `Reagent_3`, `Reagent_4`, `Reagent_5`, `Reagent_6`, `Reagent_7`, `Reagent_8`, `ReagentCount_1`, `ReagentCount_2`, `ReagentCount_3`, `ReagentCount_4`, `ReagentCount_5`, `ReagentCount_6`, `ReagentCount_7`, `ReagentCount_8`, `EquippedItemClass`, `EquippedItemSubclass`, `EquippedItemInvTypes`, `Effect_1`, `Effect_2`, `Effect_3`, `EffectDieSides_1`, `EffectDieSides_2`, `EffectDieSides_3`, `EffectRealPointsPerLevel_1`, `EffectRealPointsPerLevel_2`, `EffectRealPointsPerLevel_3`, `EffectBasePoints_1`, `EffectBasePoints_2`, `EffectBasePoints_3`, `EffectMechanic_1`, `EffectMechanic_2`, `EffectMechanic_3`, `ImplicitTargetA_1`, `ImplicitTargetA_2`, `ImplicitTargetA_3`, `ImplicitTargetB_1`, `ImplicitTargetB_2`, `ImplicitTargetB_3`, `EffectRadiusIndex_1`, `EffectRadiusIndex_2`, `EffectRadiusIndex_3`, `EffectAura_1`, `EffectAura_2`, `EffectAura_3`, `EffectAuraPeriod_1`, `EffectAuraPeriod_2`, `EffectAuraPeriod_3`, `EffectMultipleValue_1`, `EffectMultipleValue_2`, `EffectMultipleValue_3`, `EffectChainTargets_1`, `EffectChainTargets_2`, `EffectChainTargets_3`, `EffectItemType_1`, `EffectItemType_2`, `EffectItemType_3`, `EffectMiscValue_1`, `EffectMiscValue_2`, `EffectMiscValue_3`, `EffectMiscValueB_1`, `EffectMiscValueB_2`, `EffectMiscValueB_3`, `EffectTriggerSpell_1`, `EffectTriggerSpell_2`, `EffectTriggerSpell_3`, `EffectPointsPerCombo_1`, `EffectPointsPerCombo_2`, `EffectPointsPerCombo_3`, `EffectSpellClassMaskA_1`, `EffectSpellClassMaskA_2`, `EffectSpellClassMaskA_3`, `EffectSpellClassMaskB_1`, `EffectSpellClassMaskB_2`, `EffectSpellClassMaskB_3`, `EffectSpellClassMaskC_1`, `EffectSpellClassMaskC_2`, `EffectSpellClassMaskC_3`, `SpellVisualID_1`, `SpellVisualID_2`, `SpellIconID`, `ActiveIconID`, `SpellPriority`, `Name_Lang_enUS`, `Name_Lang_enGB`, `Name_Lang_koKR`, `Name_Lang_frFR`, `Name_Lang_deDE`, `Name_Lang_enCN`, `Name_Lang_zhCN`, `Name_Lang_enTW`, `Name_Lang_zhTW`, `Name_Lang_esES`, `Name_Lang_esMX`, `Name_Lang_ruRU`, `Name_Lang_ptPT`, `Name_Lang_ptBR`, `Name_Lang_itIT`, `Name_Lang_Unk`, `Name_Lang_Mask`, `NameSubtext_Lang_enUS`, `NameSubtext_Lang_enGB`, `NameSubtext_Lang_koKR`, `NameSubtext_Lang_frFR`, `NameSubtext_Lang_deDE`, `NameSubtext_Lang_enCN`, `NameSubtext_Lang_zhCN`, `NameSubtext_Lang_enTW`, `NameSubtext_Lang_zhTW`, `NameSubtext_Lang_esES`, `NameSubtext_Lang_esMX`, `NameSubtext_Lang_ruRU`, `NameSubtext_Lang_ptPT`, `NameSubtext_Lang_ptBR`, `NameSubtext_Lang_itIT`, `NameSubtext_Lang_Unk`, `NameSubtext_Lang_Mask`, `Description_Lang_enUS`, `Description_Lang_enGB`, `Description_Lang_koKR`, `Description_Lang_frFR`, `Description_Lang_deDE`, `Description_Lang_enCN`, `Description_Lang_zhCN`, `Description_Lang_enTW`, `Description_Lang_zhTW`, `Description_Lang_esES`, `Description_Lang_esMX`, `Description_Lang_ruRU`, `Description_Lang_ptPT`, `Description_Lang_ptBR`, `Description_Lang_itIT`, `Description_Lang_Unk`, `Description_Lang_Mask`, `AuraDescription_Lang_enUS`, `AuraDescription_Lang_enGB`, `AuraDescription_Lang_koKR`, `AuraDescription_Lang_frFR`, `AuraDescription_Lang_deDE`, `AuraDescription_Lang_enCN`, `AuraDescription_Lang_zhCN`, `AuraDescription_Lang_enTW`, `AuraDescription_Lang_zhTW`, `AuraDescription_Lang_esES`, `AuraDescription_Lang_esMX`, `AuraDescription_Lang_ruRU`, `AuraDescription_Lang_ptPT`, `AuraDescription_Lang_ptBR`, `AuraDescription_Lang_itIT`, `AuraDescription_Lang_Unk`, `AuraDescription_Lang_Mask`, `ManaCostPct`, `StartRecoveryCategory`, `StartRecoveryTime`, `MaxTargetLevel`, `SpellClassSet`, `SpellClassMask_1`, `SpellClassMask_2`, `SpellClassMask_3`, `MaxTargets`, `DefenseType`, `PreventionType`, `StanceBarOrder`, `EffectChainAmplitude_1`, `EffectChainAmplitude_2`, `EffectChainAmplitude_3`, `MinFactionID`, `MinReputation`, `RequiredAuraVision`, `RequiredTotemCategoryID_1`, `RequiredTotemCategoryID_2`, `RequiredAreasID`, `SchoolMask`, `RuneCostID`, `SpellMissileID`, `PowerDisplayID`, `Field227`, `Field228`, `Field229`, `SpellDescriptionVariableID`, `SpellDifficultyID`, `unk_320_2`, `unk_320_3`) VALUES
(5143,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,12,8,8,27,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7268,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 1","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $7268s1 Arcane damage every $5143t2 sec for $5143d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0),
(5144,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,20,16,16,35,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7269,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 2","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $7269s1 Arcane damage every $5144t2 sec for $5144d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(5145,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,28,24,24,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7270,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 3","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $7270s1 Arcane damage every $5145t2 sec for $5145d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(8416,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,36,32,32,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8419,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 4","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $8419s1 Arcane damage every $8416t2 sec for $8416d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(8417,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,44,40,40,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8418,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 5","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $8418s1 Arcane damage every $8417t2 sec for $8417d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0),
(10211,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,52,48,48,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10273,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 6","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $10273s1 Arcane damage every $10211t2 sec for $10211d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(10212,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,60,56,56,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10274,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 7","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $10274s1 Arcane damage every $10212t2 sec for $10212d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(25345,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,64,60,60,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25346,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 8","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $25346s1 Arcane damage every $25345t2 sec for $25345d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(27075,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,67,63,63,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27076,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 9","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $27076s1 Arcane damage every $t2 sec for $d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(38699,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,73,69,69,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38700,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 10","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $38700s1 Arcane damage every $t2 sec for $d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(38704,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,74,70,70,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38703,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 11","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $38703s1 Arcane damage every $t2 sec for $d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(42843,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,79,75,75,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42844,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 12","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $42844s1 Arcane damage every $t2 sec for $d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0), 
(42846,0,0,0,536936704,335561860,0,0,134217728,8192,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,15,0,31756,0,101,0,83,79,79,28,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,0,0,0,0,0,0,0,4,23,0,0,1000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42845,0,0,0,0,0,0,0,0,0,0,0,0,0,262,0,225,0,50,"Arcane Missiles","","","","","","","","","","","","","","","",16712190,"Rank 13","","","","","","","","","","","","","","","",16712190,"Launches Arcane Missiles at the enemy, causing $42845s1 Arcane damage every $t2 sec for $d.","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712188,31,133,1500,0,3,2048,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0); 

UPDATE `spell_dbc` SET `AttributesEx3`=131072 WHERE `ID` IN (5143,5144,5145,8416,8417,10211,10212,25345,27075,38699,38704,42843,42846);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
