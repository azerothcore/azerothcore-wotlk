-- DB update 2024_10_26_01 -> 2024_10_26_02
-- Update gameobject 'Hallow's End - Misc' with sniffed values

-- assign damage script to Bonfire
UPDATE `gameobject_template` SET `ScriptName` = 'go_flames' WHERE (`entry` = 180434);

-- updated spawns
DELETE FROM `gameobject` WHERE (`id` IN (180432, 180433, 180434, 180437, 186269, 186327, 186267, 186314))
AND (`guid` IN (17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 39805, 39806, 39807, 39808, 39809, 39810, 39811, 54946, 54947, 54948));
INSERT INTO `gameobject` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`, `ScriptName`, `VerifiedBuild`, `Comment`) VALUES
-- Forsaken Banner
(17868, 180432, 0, 0, 0, 1, 1, 1750.8131103515625, 509.61712646484375, 38.33571243286132812, 1.535889506340026855, 0, 0, 0.694658279418945312, 0.719339847564697265, 120, 255, 1, "", 45942, NULL),
(17869, 180432, 0, 0, 0, 1, 1, 1709.513916015625, 509.67730712890625, 36.90455245971679687, 1.431168079376220703, 0, 0, 0.656058311462402343, 0.754710197448730468, 120, 255, 1, "", 45942, NULL),
-- The Wickerman
(17870, 180433, 0, 0, 0, 1, 1, 1731.435546875, 508.8170166015625, 41.35896682739257812, 1.500982880592346191, 0, 0, 0.681998252868652343, 0.731353819370269775, 120, 255, 0, "", 45942, NULL),
-- Bonfire
(17871, 180434, 0, 0, 0, 1, 1, 1759.492431640625, 515.94879150390625, 35.30905914306640625, 5.253442287445068359, 0, 0, -0.49242305755615234, 0.870355963706970214, 120, 255, 1, "", 45942, NULL),
(17872, 180434, 0, 0, 0, 1, 1, 1707.3563232421875, 519.654052734375, 34.97322845458984375, 5.654868602752685546, 0, 0, -0.30901622772216796, 0.95105677843093872, 120, 255, 1, "", 45942, NULL),
(17873, 180434, 0, 0, 0, 1, 1, 1735.592041015625, 549.92852783203125, 33.68162918090820312, 0.191985160112380981, 0, 0, 0.095845222473144531, 0.995396256446838378, 120, 255, 1, "", 45942, NULL),
(17874, 180434, 0, 0, 0, 1, 1, 1714.2874755859375, 473.915802001953125, 61.64679718017578125, 2.251473426818847656, 0, 0, 0.902585029602050781, 0.430511653423309326, 120, 255, 1, "", 45942, NULL),
-- Wickerman Ember
(17875, 180437, 0, 0, 0, 1, 1, 1738.4254150390625, 512.015625, 39.81720733642578125, 4.607671737670898437, 0, 0, -0.74314403533935546, 0.669131457805633544, 120, 255, 1, "", 46158, NULL),
(17876, 180437, 0, 0, 0, 1, 1, 1731.564208984375, 514.59552001953125, 39.34745407104492187, 5.70722818374633789, 0, 0, -0.28401470184326171, 0.958819925785064697, 120, 255, 1, "", 46158, NULL),
(17877, 180437, 0, 0, 0, 1, 1, 1721.447265625, 505.14117431640625, 40.88557815551757812, 4.956737518310546875, 0, 0, -0.61566066741943359, 0.788011372089385986, 120, 255, 1, "", 46158, NULL),
(17878, 180437, 0, 0, 0, 1, 1, 1741.1187744140625, 505.332916259765625, 41.39785385131835937, 4.642575740814208984, 0, 0, -0.731353759765625, 0.681998312473297119, 120, 255, 1, "", 46158, NULL),
-- Headless Horseman Candle
(39805, 186269, 189, 0, 0, 1, 1, 1774.87158203125, 1347.73095703125, 17.96616744995117187, 3.403396368026733398, 0, 0, -0.99144458770751953, 0.130528271198272705, 7200, 255, 1, "", 46248, NULL),
(39806, 186269, 189, 0, 0, 1, 1, 1774.765625, 1349.6458740234375, 18.07423210144042968, 2.338739633560180664, 0, 0, 0.920504570007324218, 0.3907318115234375, 7200, 255, 1, "", 46248, NULL),
(39807, 186269, 189, 0, 0, 1, 1, 1776.546875, 1346.4722900390625, 17.99031829833984375, 4.817109584808349609, 0, 0, -0.66913032531738281, 0.74314504861831665, 7200, 255, 1, "", 46248, NULL),
(39808, 186269, 189, 0, 0, 1, 1, 1776.734375, 1350.7066650390625, 18.27720069885253906, 1.570795774459838867, 0, 0, 0.707106590270996093, 0.707106947898864746, 7200, 255, 1, "", 46248, NULL),
(39809, 186269, 189, 0, 0, 1, 1, 1778.532958984375, 1347.796875, 18.16446876525878906, 5.70722818374633789, 0, 0, -0.28401470184326171, 0.958819925785064697, 7200, 255, 1, "", 46248, NULL),
(39810, 186269, 189, 0, 0, 1, 1, 1778.4114990234375, 1349.9149169921875, 18.22172927856445312, 0.331610709428787231, 0, 0, 0.16504669189453125, 0.986285746097564697, 7200, 255, 1, "", 46248, NULL),
(39811, 186269, 189, 0, 0, 1, 1, 1765.258544921875, 1347.53515625, 17.55038642883300781, 0.069811686873435974, 0, 0, 0.034898757934570312, 0.999390840530395507, 7200, 255, 1, "", 46248, NULL),
-- Headless Horseman Pumpkin Table
(54946, 186327, 189, 0, 0, 1, 1, 1776.363525390625, 1348.657470703125, 17.41331672668457031, 4.625123500823974609, 0, 0, -0.73727703094482421, 0.67559051513671875, 7200, 255, 1, "", 46158, NULL),
-- Pumpkin Shrine
(54947, 186267, 189, 0, 0, 1, 1, 1776.4375, 1348.6285400390625, 19.510009765625, 6.14356088638305664, 0, 0, -0.06975555419921875, 0.997564136981964111, 7200, 255, 1, "", 46158, NULL),
-- Loosely Turned Soil
(54948, 186314, 189, 0, 0, 1, 1, 1762.9095458984375, 1347.555419921875, 17.56109619140625, 5.009094715118408203, 0, 0, -0.59482288360595703, 0.80385679006576538, 7200, 255, 1, "", 46158, NULL);

-- new spawns
DELETE FROM `gameobject` WHERE (`id` IN (180432, 180434, 180437))
AND (`guid` IN (154, 155, 156, 157));
INSERT INTO `gameobject` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`, `ScriptName`, `VerifiedBuild`, `Comment`) VALUES
(154, 180432, 0, 0, 0, 1, 1, 1731.3472900390625, 474.772796630859375, 61.65636444091796875, 1.570795774459838867, 0, 0, 0.707106590270996093, 0.707106947898864746, 120, 255, 1, "", 45942, NULL),
(155, 180434, 0, 0, 0, 1, 1, 1744.9915771484375, 475.503570556640625, 61.65636444091796875, 5.183629035949707031, 0, 0, -0.52249813079833984, 0.852640450000762939, 120, 255, 1, "", 45942, NULL),
(156, 180437, 0, 0, 0, 1, 1, 1722.21875, 512.33160400390625, 39.15671920776367187, 0.209439441561698913, 0, 0, 0.104528427124023437, 0.994521915912628173, 120, 255, 1, "", 46158, NULL),
(157, 180437, 0, 0, 0, 1, 1, 1731.5814208984375, 500.1231689453125, 42.50485992431640625, 4.502951622009277343, 0, 0, -0.7771453857421875, 0.629321098327636718, 120, 255, 1, "", 46158, NULL);

-- remove duplicate spawns
DELETE FROM `gameobject` WHERE (`id` IN (180433))
AND (`guid` IN (240003));
DELETE FROM `gameobject_addon` WHERE (`guid` IN (240003));
DELETE FROM `game_event_gameobject` WHERE (`eventEntry` = 12) AND (`guid` IN (240003));

-- enable all spawns for eventEntry 12
DELETE FROM `game_event_gameobject` WHERE (`eventEntry` = 12)
AND (`guid` IN (SELECT `guid` FROM `gameobject` WHERE `id` IN (180432, 180433, 180434, 180437, 186267, 186269, 186314, 186327)));
INSERT INTO `game_event_gameobject` (SELECT 12, `guid` FROM `gameobject` WHERE `id` IN (180432, 180433, 180434, 180437, 186267, 186269, 186314, 186327));
